<!DOCTYPE html>
<html lang="en" style="overflow: hidden;  height: 100%;">
	<head>
		<title>UpShaped Showroom</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="assets/css/custom_bootstrap.css">
        
        <!-- Import the component -->
        <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
	</head>

	<body style="overflow: hidden; height: 100%;">
		<!-- Import maps polyfill -->
		<!-- Remove this when import maps will be widely supported -->
		<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

		<script type="importmap">
			{
				"imports": {
					"three": "../build/three.module.js",
					"three/addons/": "./jsm/"
				}
			}
		</script>

        <div class="container-fluid gx-0 h-100 w-100">
            <!-- 3D model -->
            <!-- <div id="display" class="gx-0 h-100 w-100">
                <script type="module" src="assets/js/showroom.js"></script>
            </div> -->

            <model-viewer
                id="display"
                class="gx-0 h-100 w-100"
                camera-orbit="45deg 75deg 6m"
                alt="UpShaped Display of leather couch"
                src="assets/models/couch/leather.glb"
                ar
                poster="assets/img/demo/preview3.jpg" shadow-intensity="1"
                camera-controls touch-action="pan-y"
            ></model-viewer>

            <!-- Buttons -->
            <!-- <div class="gx-0" style="position: absolute; right: 1em; bottom: 1em;">
                <label class="btn btn-outline-secondary" for="">Verander Achtergrond</label>
            </div> -->

            <!-- Kleur -->
            <div class="gx-0" style="position: absolute; left: 1em; bottom: 1em;">

                <!-- Uitvoering -->
                <!-- <div class="row gx-0 mt-1 ms-1">
                    <span class="fs-6">
                        Uitvoering
                    </span>
                </div>

                <div class="btn-group" role="group" aria-label="Version Toggle">
                    <input type="radio" class="btn-check" name="btnversonradio" id="version1" autocomplete="off">
                    <label class="btn btn-outline-secondary btn-sm" for="version1">1 zits</label>
                  
                    <input type="radio" class="btn-check" name="btnversonradio" id="version2" autocomplete="off" checked>
                    <label class="btn btn-outline-secondary btn-sm" for="version2">2,5 zits</label>
                </div> -->

                <div class="row gx-0 mt-1 ms-1">
                    <span class="fs-6">
                        Kleur
                    </span>
                </div>

                <div class="btn-group" role="group" aria-label="Color Toggle" id="color-controls">
                    <input type="radio" class="btn-check" name="btncolorradio" id="blue" data-color="#dbbfa9" autocomplete="off" checked>
                    <label class="btn btn-outline-secondary btn-sm" for="blue">Nougat</label>
                  
                    <input type="radio" class="btn-check" name="btncolorradio" id="gold" data-color="#9a463d" autocomplete="off">
                    <label class="btn btn-outline-secondary btn-sm" for="gold">Cognac</label>
                  
                    <input type="radio" class="btn-check" name="btncolorradio" id="purple" data-color="#666677" autocomplete="off">
                    <label class="btn btn-outline-secondary btn-sm" for="purple">Grijs</label>
                </div>
            </div>

            <script>
                const modelViewerColor = document.querySelector("model-viewer#display");
    
                function changeColor(colorString) {
                    if (colorString) {
                        console.log(colorString);
                        const materials = modelViewerColor.model.materials;
                        // materials[0].pbrMetallicRoughness.setBaseColorFactor(colorString); 0 is the metal
                        materials[1].pbrMetallicRoughness.setBaseColorFactor(colorString);
                        materials[2].pbrMetallicRoughness.setBaseColorFactor(colorString);
                        materials[3].pbrMetallicRoughness.setBaseColorFactor(colorString);
                        materials[4].pbrMetallicRoughness.setBaseColorFactor(colorString);
                        materials[5].pbrMetallicRoughness.setBaseColorFactor(colorString);
                        materials[6].pbrMetallicRoughness.setBaseColorFactor(colorString);
                    }
                }

                modelViewerColor.addEventListener('load', () => {
                    changeColor("#dbbfa9"); // Set default color
                    console.log("#dbbfa9");
                });
                
                document.querySelector('#color-controls').addEventListener('click', (event) => {
                    const colorString = event.target.dataset.color;

                    changeColor(colorString);
                });
            </script>

        </div>

	</body>
</html>